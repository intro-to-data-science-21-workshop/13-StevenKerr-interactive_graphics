---
title: "Introduction to Data Science"
subtitle: "Interactive Plotting with plotly in R"
author: "Steve Kerr & Julian Kath"
institute: "Hertie School"
date: "`r Sys.Date()`"
output:
  xaringan::moon_reader:
    yolo: false
    css: ["red_theme.css", metropolis-fonts]
    lib_dir: libs
    includes:
      after_body: insert_logo.html
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---
background-image: url(https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Plotly_logo_for_digital_final_%286%29.png/1600px-Plotly_logo_for_digital_final_%286%29.png)
background-position: center
background-size: contain

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
```

???

Image credit: [Wikimedia Commons](https://commons.wikimedia.org/wiki/File:Plotly-logo-01-square.png)

---
class: center, middle

# Interactive Graphics with plotly

### “The simple graph has brought more information to the data analyst’s mind than any other device.” 

### - John Tukey

---
class: center, middle

# Interactive Graphics with plotly

### “The ~~simple~~complex graph has brought more information to the data analyst’s mind than any other device.”

### - Julian Kath & Steve Kerr

---

# Overview

## 1. What is plotly? 
## 2. Why plotly?
## 3. How does plotly work?
## 4. What can plotly do? 
## 5. Key Takeaways
## 6. Resources

---

# Data Visualisation

background-image: url(https://d33wubrfki0l68.cloudfront.net/3e0445f7fc16698cc4402445259d84aa411dddc3/9abcb/diagrams/data-science-communicate.png)
background-position: center
background-size: contain


### ...Unsure why url image is not working. We may need to download to our GitHub repository to create a local reference for the image.

???

Image credit: [source goes here](link goes here)

---

# Intro to plotly

background-image: url(https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Plotly_logo_for_digital_final_%286%29.png/1600px-Plotly_logo_for_digital_final_%286%29.png)
background-position: center
background-size: contain

### ...Same issue as previous slides, esp considering how this code already rendered the plotly logo successfully on the first slide.

???

Image credit: [Wikimedia Commons](https://commons.wikimedia.org/wiki/File:Plotly-logo-01-square.png)


---

# Why plotly? 

{Insert bar chart showing market share for plotly vs other R-JS interfaces}

---

# Intro to plotly

## plotly is an R package for creating **interactive** and **dynamic** **web-based** graphics

## 1. Audiences can directly **interact** with your data
## 2. **Dynamic** graphics will change automatically
## 3. **Web-based** graphics can be easily shared 

---

# Types of Graphics

## 1. Static
## 2. Interactive
## 3. Dynamic

---

# Types of Graphics: Static

{insert static graph}

---

# Types of Graphics: Interactive

{insert interactive graph}

---

# Types of Graphics: Dynamic

{insert dynamic graph}

---

class: center, middle

{insert expanding brain meme}

---

# How does plotly work? 

- Grammar of Graphics
    - similar to ggplot2
- Key Terms
    - Trace: the data
    - Trace Type: ex. histogram, pie, scatter, etc.
    - Attribute: the style

---

# How does plotly work? 

* Grammar of Graphics
    + similar to ggplot2
* Key Terms
    + Trace: the data
    + Trace Type: ex. histogram, pie, scatter, etc.
    + Attribute: the style

---

# How does plotly work? 

## 1. Transform a ggplot2 graphic into a plotly graphic
### - **ggplotly()**

[Insert basic ggplotly() plot]

## 2. Directly initialize a plotly graphic 
### - **plot_ly()** 

[Insert basic plot_ly plot]

[At this point, we can explain what each argument does]

    
---

# #1: ggplot2 → plotly

## - If you use ggplot2, **ggplotly()** converts your static plot to an interactive web-based version! 
## - This functionality can be really helpful for quickly adding interactivity to your existing ggplot2 workflow

---

# ggplot2 Refresher

## Grammar of Graphics:
### 1. Data
### 2. Aesthetics
### -  aes()
###3. Add layers
### - geom_point()

[Consider nixxing]

---
# ggplot2 Refresher (continued)

## - By default, ggplotly() tries to replicate the static ggplot2 version exactly 
## - Some useful ones include layout() (for customizing the layout), 
## - add_traces() (and its higher-level add_*() siblings, for example add_polygons(), for adding new traces/data), 
## - subplot() (for combining multiple plotly objects)

---

# #2: plotly

## Grammar of Graphics (similar to ggplot2):

## 1. Trace
## - the data
## 2. Trace Type
## - ex. histogram, pie, scatter, etc.
## 3. Attribute
## - visual and/or interactive properties

---

# #2: plotly (continued)

## - By default, ggplotly() tries to replicate the static ggplot2 version exactly 
## - Some useful ones include layout() (for customizing the layout), 
## - add_traces() (and its higher-level add_*() siblings, for example add_polygons(), for adding new traces/data), 
## - subplot() (for combining multiple plotly objects)

---

# What can plotly do? 

(https://i.imgflip.com/5qzavw.jpg)

---


(https://upload.wikimedia.org/wikipedia/en/0/0a/Gallery_of_Plotly_Graphs.png)


---

Install the **plotly** package from [CRAN](https://cran.r-project.org/web/packages/plotly/index.html):

```{r eval=FALSE, tidy=FALSE}
install.packages("plotly")
```
---
class: hide-logo
# plotly animation of gapminder dataset (1/2)
```{r eval=TRUE, tidy=TRUE, message=FALSE}

library(plotly)
library(gapminder)
library(tidyverse)

gapminder %>% 
  plot_ly(x = ~gdpPercap, y = ~lifeExp,
          hoverinfo = "text",
          text = ~paste("</br> Country: ", country,
                        "</br> GDP per capita: ", round(gdpPercap, 0),
                        "</br> Life Expectancy: ", lifeExp,
                        "</br> Population: ", round(pop/1000000, 0), " Mio")) %>% 
  add_text(x = 6500, y = 40, 
           text = ~year, frame = ~year,
           textfont = list(size = 150, 
                           color = toRGB("gray80"))) %>% 
  add_markers(size = ~pop, color = ~continent,
              frame = ~year, ids = ~country,
              marker = list(sizemode = "diameter")) -> ani_plot 
```
---
class: hide-logo
# plotly animation of gapminder dataset (1/2)
```{r eval=TRUE, tidy=TRUE, message=FALSE, warning=FALSE}
ani_plot %>% 
  layout(title = list(text = "GDP per capita vs. Life Expectancy from 1952 to 2007",
                      xanchor = "center",
                      x = 1000),
         xaxis = list(type = "log",
                      title = "GDP per capita"), 
         yaxis = list(type = "log",
                      title = "Life Expectancy at birth"),
         showlegend = FALSE) %>% 
  animation_opts(frame = "500",
                 transition = "500",
                 easing = "linear",
                 redraw = FALSE) %>% 
  animation_slider(hide = TRUE)  -> ani_plot
```
---
class: hide-logo
```{r eval=TRUE, tidy=TRUE}
ani_plot
  
```

